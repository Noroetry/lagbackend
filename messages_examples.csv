Endpoint,Method,Auth,RequestExample,SuccessResponseExample,Notes
"/api/users","POST",No,"{ ""username"": ""alice"", ""email"": ""alice@example.com"", ""password"": ""secret"" }","{ ""user"": { ""_id"":""7"", ""username"":""alice"" }, ""token"":""<jwt>"" }","Registro: devuelve token + user"
"/api/users/login","POST",No,"{ ""usernameOrEmail"": ""alice"", ""password"": ""secret"" }","{ ""user"": { ""_id"":""7"", ""username"":""alice"" }, ""token"":""<jwt>"" }","Login: guardar token en secure storage"
"/api/users/me","GET",Yes, ,"{ ""_id"":""7"", ""username"":""alice"", ""email"":""alice@example.com"" }","Perfil actual"
"/api/messages/send","POST",Yes,"{ ""title"":""Hola"", ""description"":""Mensaje"", ""destination"":""bob"" }","{ ""id"":12, ""title"":""Hola"", ""source"":""alice"", ""destination"":""bob"", ""read"":""N"" }","Enviar mensaje: source tomado del token"
"/api/messages/inbox","GET",Yes, ,"[ { ""id"":12, ""title"":""Hola"", ""source"":""alice"", ""read"":""N"" } ]","Lista de mensajes recibidos"
"/api/messages/sent","GET",Yes, ,"[ { ""id"":12, ""title"":""Hola"", ""destination"":""bob"" } ]","Lista de mensajes enviados"
"/api/messages/:id","GET",Yes, ,"{ ""id"":12, ""title"":""Hola"", ""description"":""..."", ""source"":""alice"", ""destination"":""bob"", ""read"":""N"" }","Obtener mensaje; 403 si no pertenece al user"
"/api/messages/:id/read","PATCH",Yes, ,"{ ""id"":12, ""read"":""S"", ""dateRead"":""2025-10-28T12:34:56.000Z"" }","Marcar leído (sólo destination)"
"/api/messages/:id/state","PATCH",Yes,"{ ""state"": ""R"" }","{ ""id"":12, ""state"":""R"" }","Cambiar estado: A,R,D"
"/api/messages/:id","DELETE",Yes, ,"{ ""id"":12, ""state"":""D"" }","Soft-delete (state = 'D')"
